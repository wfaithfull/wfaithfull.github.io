---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);

function formatDate(date: Date): string {
  return date.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
}
---

<BaseLayout title="Dr. Will Faithfull — CEO @ ExaDev, Investor @ ExaCap">
  <!-- Hero -->
  <section class="max-w-3xl mx-auto px-6 pt-20 pb-16 sm:pt-28 sm:pb-24">
    <div class="flex items-center gap-3 mb-6 text-sm font-mono tracking-wide">
      <span class="text-[var(--color-accent)]">CEO @ ExaDev</span>
      <span class="text-[var(--color-border)]">·</span>
      <span class="text-[var(--color-accent)]">Investor @ ExaCap</span>
    </div>
    <div class="hero-glow">
      <h1 class="hero-gradient text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight leading-[1.1] mb-6">
        Dr. Will Faithfull
      </h1>
    </div>
    <p class="text-lg sm:text-xl text-[var(--color-text-muted)] leading-relaxed max-w-2xl">
      Hands-on engineer and computer science PhD. Built
      <a href="https://exadev.io" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors underline underline-offset-4">ExaDev</a>
      from two graduates in a bedroom to a Google supplier and serial startup practice
      in SaaS, AI, and Fintech across four countries. Customers and portfolio companies have
      collectively raised over £77m. Investor in
      <a href="https://clearstake.com" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors underline underline-offset-4">ClearStake</a> and
      <a href="https://adpeak.ai" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors underline underline-offset-4">AdPeak</a>.
    </p>
    <div class="flex items-center gap-4 mt-8">
      <a href="mailto:will@faithfull.me" class="inline-flex items-center gap-2 bg-[var(--color-accent)] text-[var(--color-bg)] font-semibold text-sm px-5 py-2.5 rounded-lg hover:bg-[var(--color-accent-hover)] transition-colors">
        Get in touch
      </a>
      <a href="/about" class="inline-flex items-center gap-2 border border-[var(--color-border)] text-[var(--color-text)] text-sm px-5 py-2.5 rounded-lg hover:border-[var(--color-text-muted)] transition-colors">
        About me
      </a>
    </div>
  </section>

  <!-- Divider -->
  <div class="max-w-3xl mx-auto px-6">
    <hr class="border-[var(--color-border)]" />
  </div>

  <!-- Recent Posts -->
  <section class="max-w-3xl mx-auto px-6 py-16">
    <div class="flex items-center justify-between mb-10">
      <h2 class="text-2xl font-bold text-[var(--color-text-heading)] tracking-tight">Recent writing</h2>
      <a href="/blog" class="text-sm text-[var(--color-text-muted)] hover:text-[var(--color-accent)] transition-colors">
        View all &rarr;
      </a>
    </div>
    <div class="flex flex-col gap-1">
      {posts.map((post) => (
        <a href={`/blog/${post.id}`} class="group flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-4 py-3 -mx-3 px-3 rounded-lg hover:bg-[var(--color-bg-surface)] transition-colors">
          <time class="text-sm text-[var(--color-text-muted)] font-mono shrink-0 tabular-nums">{formatDate(post.data.date)}</time>
          <span class="text-[var(--color-text-heading)] group-hover:text-[var(--color-accent)] transition-colors font-medium">{post.data.title}</span>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
